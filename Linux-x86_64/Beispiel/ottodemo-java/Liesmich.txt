##############################################################################
                                 Willkommen!
##############################################################################

ottodemo ist ein Beispielprogramm, das Ihnen zeigt, wie Sie die Otto API-
Funktionen in einer Java-Anwendung nutzen können.

In ottodemo werden folgende Aspekte beispielhaft implementiert:

  - Empfang einer Datei mit einer Objekt-ID von OTTER
  - Senden einer mindestens 20 MiB großen Datei zum OTTER mit Rückgabe der 
    erhaltenen Objekt-ID

Den Quellcode des Beispielprogramms finden Sie im Verzeichnis 'src'.

Das Hauptprogramm beginnt in der Datei src/de/elster/otto/demo/Main.java

Die folgenden Abschnitte beschreiben, wie Sie das Beispielprogramm unter
Windows, Linux, AIX und macOS erstellen und ausführen können.

Voraussetzung:
============== 

Die Hersteller-ID muss über den Parameter -i der ottodemo übergeben werden.
Wird kein -i Parameter angegeben, wird die Hersteller-ID in der Konsole abgefragt.
Es muss hier die eigene Hersteller-ID verwendet werden. 

Installieren Sie ein aktuelles Java Development Kit und setzen Sie die Umgebungsvariable
JAVA_HOME auf dieses Development Kit (wird für Javadoc benötigt).
Installieren Sie das Buildsystem Ant und bauen Sie das Projekt durch einen Aufruf
von "ant" im aktuellen Verzeichnis.

Alternativ kann auch Maven als Buildsystem verwendet werden.
Installieren Sie dazu Maven und bauen Sie das Projekt durch einen Aufruf
von "mvn package" im aktuellen Verzeichnis.
Hinweis: Achten Sie darauf, das für den Build verwendete JDK auch in der globalen
Variable JAVA_HOME zu setzen, damit sie von Maven und bei der Javadoc-Generierung
gefunden wird.
Der aktuelle Wert kann wie folgt geprüft werden:
Windows: "echo %JAVA_HOME%"
Linux: "echo $JAVA_HOME"
Um zu prüfen, welches JDK von Maven verwendet wird:
"mvn -v"

Als weitere Alternative können Sie auch die Entwicklungsumgebung Eclipse benutzen
und das OttoDemoJava-Projekt importieren (Die Umgebungsvariable PATH muss für die 
Generierung mit Javadoc um den Pfad zum Unterverzeichnis "bin" des JDKs erweitert
werden, falls Sie das ant-Build-Skript aus Eclipse benutzen wollen).

Zur Ausführung muss das Java-Executable im Pfad liegen und
in der gleichen CPU-Architektur vorliegen wie Otto.

Ausführen:
==========

ottodemo ist eine Konsolenanwendung. Zum Ausführen unter Windows ist das 
64-Bit Visual C++ Redistributable Package für Visual Studio 2022 
notwendig. Download: https://www.visualstudio.com/downloads/

Sie können ottodemo wie folgt ausführen:

*       Unter Windows:
        "starte-ottodemo.bat"

*       Unter Linux, AIX und macOS:
        "sh starte-ottodemo.sh"

Diese Startskripte können auch mit folgenden Optionen aufgerufen werden: 

Optionen:
    --help               Hilfetext anzeigen
    -e <dateipfad>       Empfange Daten und speichere diese in der angegebenen Datei.
    -s <dateipfad>       Sende die angegebene Datei und gib die erhaltene Objekt-ID zurück.
    -o Objekt-ID         OTTER-Objekt-ID der abzuholenden Datei (nur bei Empfang anzugeben)
    -c <certificate>     Pfad zu einem Benutzerzertifikat
    -p <pin>             PIN für das Benutzerzertifikat, _NULL (Nullzeiger) für keine PIN
    -d <dir>             Pfad zum Verzeichnis mit den Otto-Bibliotheken
    -l <log>             Pfad zum Verzeichnis, in das die Otto-Protokolldateien geschrieben werden
    -i Hersteller-ID     ID des Softwareherstellers. Falls die Option nicht gesetzt ist, wird die Hersteller-ID interaktiv abgefragt

Beispiele:
     <starte-ottodemo>
     <starte-ottodemo> --help
     <starte-ottodemo> -e Empfang.xml -o 7090bc69-be5e-4fd0-b91a-2128021295d6 -c test-softidnr-pse -p 123456 -i <Hersteller-ID>
     <starte-ottodemo> -s <Datei> -c test-softidnr-pse -p 123456 -i <Hersteller-ID>

<starte-ottodemo>: 
Alternativ zu den Startskripten können Sie ottodemo auch direkt mit "java -jar ottodemo.jar" aufrufen. 
Unter AIX müssen Sie in diesem Fall die globale Umgebungsvariable LIBPATH auf das Verzeichnis 
setzen, in dem die libotto.so liegt, und die Umgebungsvariable "LDR_PRELOAD64" auf den Pfad der libc++. Beispiel:
    export LDR_PRELOAD64="/usr/lib/libc++.a(shr_64.o)"
