##############################################################################
                                 Willkommen!
##############################################################################

ericdemo ist ein Beispielprogramm, das Ihnen zeigt, wie Sie die ERiC-
Funktionen in einer Python-Anwendung nutzen können.

In ericdemo werden folgende Aspekte beispielhaft implementiert:

  - Registrierung der Nachrichten- und Fortschrittsbalken-Callbacks
  - Auslesen von Zertifikatsinformationen
  - Auslesen eines Datensatzes aus einer Datei
  - Aufruf der Funktion EricBearbeiteVorgang
     - Validieren eines XML-Datensatzes
     - Versenden eines Datensatzes, mit Zertifikat authentifiziert oder
       unsigniert
     - PDF-Erstellung nach dem Versenden
  - Entschlüsseln eines Datensatzes     

Den Quellcode des Beispielprogramms finden Sie im Verzeichnis:

*       ericdemo

Das Hauptprogramm beginnt in der Datei 'ericdemo/ericdemo.py'

Die folgenden Abschnitte beschreiben, wie Sie das Beispielprogramm unter
Windows, Linux und macOS erstellen und ausführen können.

Voraussetzung:
============== 

Für die Nutzung des mitgelieferten XML-Beispieldatensatzes "ESt_2020.xml"  
gilt ab dem ERiC-Release 39.4.x folgende Voraussetzung:

Die Hersteller-ID "74931" im Element <HerstellerID>...</HerstellerID> 
muss durch die eigene Hersteller-ID ersetzt werden. 
Die Hersteller-ID "74931" dient nur noch zur Illustration und kann auch zu 
Testzwecken grundsätzlich nicht mehr verwendet werden!

Nur mit der eigenen Hersteller-ID kann der XML-Beispieldatensatz  
vom ERiC und von ELSTER verarbeitet werden.

Im Fehlerfall wird der Fehlercode "610301202 ERIC_IO_TESTHERSTELLERID_GESPERRT"
ausgegeben, und folgende Fehlermeldung wird angezeigt:

   "Die im XML angegebene Hersteller-ID ist gesperrt. 
    Bitte verwenden Sie Ihre eigene Hersteller-ID auch für Testfälle."

Die "ESt_2020.xml" befindet sich im selben Ordner wie diese Liesmich.txt.

Ausführen:
==========

Voraussetzung: Python >= 3.7

ericdemo ist eine Konsolenanwendung. Zum Ausführen unter Windows ist das 
32-Bit bzw. 64-Bit Visual C++ Redistributable Package für Visual Studio 2022 
notwendig. Download: https://www.visualstudio.com/downloads/

Sie können ericdemo wie folgt ausführen:

*       Unter Windows:
        "starte-ericdemo.bat"

*       Unter Linux und macOS:
        "sh starte-ericdemo.sh"

Diese Startskripte können auch mit folgenden Optionen aufgerufen werden: 

Optionen:
  -h                    Hilfetext anzeigen
  -v <datenartversion>  Datenartversion
  -x <xml>              Pfad zur Datensatzdatei
  -c <zertifikat>       Pfad zu einem Benutzerzertifikat, _NULL (Nullzeiger) für kein Benutzerzertifikat
  -p <pin>              PIN für das Benutzerzertifikat, _NULL (Nullzeiger) für keine PIN
  -l <log>              Pfad zum Verzeichnis, in dem die ERiC-Protokolldateien geschrieben werden
  -d <dir>              Pfad zum Verzeichnis mit den ERiC-Bibliotheken
  -n                    Der Datensatz soll nicht versendet, sondern nur validiert werden
  -e                    Der Datensatz wird nicht validiert oder versendet, sondern entschlüsselt
  -s <dateipfad>        Die Serverantwort bzw. die entschlüsselten Daten werden in die angegebene Datei geschrieben
  -t <transferhandle>   Transferhandle, das an die Server übermittelt wird (nur bei Datenabholungen anzugeben)

Unter Windows werden die Optionen mit einem Schrägstrich "/" statt einem
Bindestrich "-" eingeleitet.

Beispiele:
  <starte-ericdemo>
  <starte-ericdemo> -v ESt_2020 -x ESt_2020.xml -c test-softidnr-pse.pfx -p 123456
  <starte-ericdemo> -v ESt_2016 -x ESt_2016.xml -c _NULL -p _NULL
  <starte-ericdemo> -v ESt_2020 -x ESt_2020.xml -n
  <starte-ericdemo> -v ESt_2020 -x ESt_2020.xml
  <starte-ericdemo> -v Kontoinformation -x kontoinformation.xml -c "http://127.0.0.1:24727/eID-Client?testmerker=520000000" -p _NULL
  <starte-ericdemo> -v MitteilungAbholung -x MitteilungAbholungAnfrage.xml -c test-softidnr-pse.pfx -p 123456 -t 0
  <starte-ericdemo> -e -x Abholdaten.b64 -s Abholdaten.xml
